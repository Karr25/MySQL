{"architecture":"amd64","config":{"ExposedPorts":{"3306/tcp":{},"33060/tcp":{}},"Env":["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","GOSU_VERSION=1.17","MYSQL_MAJOR=8.0","MYSQL_VERSION=8.0.40-1.el9","MYSQL_SHELL_VERSION=8.0.40-1.el9"],"Entrypoint":["docker-entrypoint.sh"],"Cmd":["mysqld"],"Volumes":{"/var/lib/mysql":{}},"WorkingDir":"/"},"created":"2024-10-14T22:15:13Z","history":[{"created":"2024-10-14T22:15:13Z","created_by":"ADD oraclelinux-9-slim-amd64-rootfs.tar.xz / # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"CMD [\"/bin/bash\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tgroupadd --system --gid 999 mysql; \tuseradd --system --uid 999 --gid 999 --home-dir /var/lib/mysql --no-create-home mysql # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"ENV GOSU_VERSION=1.17","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tarch=\"$(uname -m)\"; \tcase \"$arch\" in \t\taarch64) gosuArch='arm64' ;; \t\tx86_64) gosuArch='amd64' ;; \t\t*) echo \u003e\u00262 \"error: unsupported architecture: '$arch'\"; exit 1 ;; \tesac; \tcurl -fL -o /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$gosuArch.asc\"; \tcurl -fL -o /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$gosuArch\"; \texport GNUPGHOME=\"$(mktemp -d)\"; \tgpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4; \tgpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu; \trm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc; \tchmod +x /usr/local/bin/gosu; \tgosu --version; \tgosu nobody true # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tmicrodnf install -y \t\tbzip2 \t\tgzip \t\topenssl \t\txz \t\tzstd \t\tfindutils \t; \tmicrodnf clean all # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tkey='BCA4 3417 C3B4 85DD 128E C6D4 B7B3 B788 A8D3 785C'; \texport GNUPGHOME=\"$(mktemp -d)\"; \tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \tgpg --batch --export --armor \"$key\" \u003e /etc/pki/rpm-gpg/RPM-GPG-KEY-mysql; \trm -rf \"$GNUPGHOME\" # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"ENV MYSQL_MAJOR=8.0","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"ENV MYSQL_VERSION=8.0.40-1.el9","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eu; \t{ \t\techo '[mysql8.0-server-minimal]'; \t\techo 'name=MySQL 8.0 Server Minimal'; \t\techo 'enabled=1'; \t\techo 'baseurl=https://repo.mysql.com/yum/mysql-8.0-community/docker/el/9/$basearch/'; \t\techo 'gpgcheck=1'; \t\techo 'gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql'; \t\techo 'module_hotfixes=true'; \t} | tee /etc/yum.repos.d/mysql-community-minimal.repo # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tmicrodnf install -y \"mysql-community-server-minimal-$MYSQL_VERSION\"; \tmicrodnf clean all; \tgrep -F 'socket=/var/lib/mysql/mysql.sock' /etc/my.cnf; \tsed -i 's!^socket=.*!socket=/var/run/mysqld/mysqld.sock!' /etc/my.cnf; \tgrep -F 'socket=/var/run/mysqld/mysqld.sock' /etc/my.cnf; \t{ echo '[client]'; echo 'socket=/var/run/mysqld/mysqld.sock'; } \u003e\u003e /etc/my.cnf; \t\t! grep -F '!includedir' /etc/my.cnf; \t{ echo; echo '!includedir /etc/mysql/conf.d/'; } \u003e\u003e /etc/my.cnf; \tmkdir -p /etc/mysql/conf.d; \tmkdir -p /var/lib/mysql /var/run/mysqld; \tchown mysql:mysql /var/lib/mysql /var/run/mysqld; \tchmod 1777 /var/lib/mysql /var/run/mysqld; \t\tmkdir /docker-entrypoint-initdb.d; \t\tmysqld --version; \tmysql --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eu; \t{ \t\techo '[mysql-tools-community]'; \t\techo 'name=MySQL Tools Community'; \t\techo 'baseurl=https://repo.mysql.com/yum/mysql-tools-community/el/9/$basearch/'; \t\techo 'enabled=1'; \t\techo 'gpgcheck=1'; \t\techo 'gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql'; \t\techo 'module_hotfixes=true'; \t} | tee /etc/yum.repos.d/mysql-community-tools.repo # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"ENV MYSQL_SHELL_VERSION=8.0.40-1.el9","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c set -eux; \tmicrodnf install -y \"mysql-shell-$MYSQL_SHELL_VERSION\"; \tmicrodnf clean all; \t\tmysqlsh --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"VOLUME [/var/lib/mysql]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"COPY docker-entrypoint.sh /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"RUN /bin/sh -c ln -s usr/local/bin/docker-entrypoint.sh /entrypoint.sh # backwards compat # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-10-14T22:15:13Z","created_by":"ENTRYPOINT [\"docker-entrypoint.sh\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"EXPOSE map[3306/tcp:{} 33060/tcp:{}]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-10-14T22:15:13Z","created_by":"CMD [\"mysqld\"]","comment":"buildkit.dockerfile.v0","empty_layer":true}],"os":"linux","rootfs":{"type":"layers","diff_ids":["sha256:7600fdef234bf101e8f4027a1c27c783cf1e502e2de00f676d99aeaf1d6cc5ef","sha256:0af6d64d31f6d68d5a235951f10ea20059eba5e010c478b664c7ca2fdaf9da6c","sha256:0a231028f7bba91f53ceea9ed8ccfc4c734d389004b65ca70d7efd88e1846c97","sha256:78d222d8d347134ecbabaa34df38d792a2b84825249f71464200bdbe7f0eefbd","sha256:78080a490f63a6c70fb2bb5af8615d1cf5f3435abadc792bc45e487bc49a8b8d","sha256:cadedf47cc2b316a4134a2e2fc236c61ef7e5b007ec93cc358887824321b10b8","sha256:20466b7f6582994254b0a2a7e35679be7dd7c1b109eebc16165feece2d5487dc","sha256:bad6f6fa0a06452bd93bc3e7a4bb82b56059de7b30ec056145707b51b4296556","sha256:238a03116078eee1871c49fcb4a8f54a5c7188508b8f8519b73aa9c7deb9e694","sha256:e9e263909c0aa7fd6c88b614149a2cb91c36a6890c59c7bf02ad3c8cde60425d","sha256:595880a638fc1176262fd1b118ad18f109bf93155a3a794ad2c32ba70fafdba7"]}}